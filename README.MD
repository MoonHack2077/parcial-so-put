# ğŸ§ª Microservicio de Tareas (Parcial 2 - IngenierÃ­a de Software)

Microservicio desarrollado en Golang con MongoDB, contenerizado con Docker, probado con Thunder Client y cubierto con pruebas unitarias usando Testify. Forma parte del parcial 2.

---

## ğŸš€ Funcionalidad

CRUD completo sobre la entidad `Tarea`, que incluye:

- [x] Crear tarea (POST `/tareas`)
- [x] Obtener tareas (GET `/tareas`)
- [x] Actualizar tarea por ID (PUT `/tareas/{id}`)
- [x] Eliminar tarea por ID (DELETE `/tareas/{id}`)

---

## ğŸ“¦ TecnologÃ­as utilizadas

- Golang
- MongoDB
- Docker y Docker Compose
- Thunder Client (VSCode)
- Testify para pruebas unitarias
- Godotenv para manejar entornos

---

## ğŸ› ï¸ Instrucciones para ejecutar

### 1. Clonar el repositorio y cargar variables

```bash
git clone https://github.com/MoonHack2077/parcial-so-put.git
cd parcial-so-put
```

Crear un archivo `.env` con:

```env
ENV=prod
MONGO_URI=mongodb://mongo:27017
MONGO_URI_TEST=mongodb://localhost:27017
MONGO_DB=tareasdb
PORT=8080
```

### 2. Ejecutar el microservicio con Docker

```bash
# O usar el script automatizado:
./automatizar.ps1     # Windows PowerShell

# o si estas en Linux o WSL
# Asignar permisos de ejecuciÃ³n (solo una vez):
chmod +x automatizar.sh

# Ejecutar el script
./automatizar.sh
```

La app estarÃ¡ disponible en: [http://localhost:8080](http://localhost:8080)

---

## ğŸ³ Imagen en Docker Hub

La imagen del microservicio fue construida y publicada en Docker Hub. Puede ser ejecutada en cualquier entorno compatible con Docker:

ğŸ”— **https://hub.docker.com/r/juanma1301/parcial-so-put**

### Para ejecutarla directamente:

```bash
docker pull juanma1301/parcial-so-put
docker run -p 8080:8080 --env-file .env juanma1301/parcial-so-put
```

> AsegÃºrate de tener un archivo `.env` vÃ¡lido al momento de correr el contenedor.

---

## ğŸ§ª Pruebas

### Pruebas unitarias

```bash
go test -cover ./...
```

- Cubre servicios: crear, obtener, actualizar y eliminar tareas

ğŸ“Š Reporte de cobertura generado:
Archivo: coverage.out  
```bash
go test -coverprofile=coverage.out ./...
```

---

### Thunder Client (colecciÃ³n de pruebas)

- Incluye todos los endpoints
- Validaciones de estado, respuestas y estructura
- Archivo de colecciÃ³n exportado: `thunder-collection_parcial2.json`

---

## ğŸ—„ï¸ Backup de base de datos

Se genera backup dentro del contenedor Mongo con:

```powershell
docker exec -t mongo mongodump --archive="/data/db/backup-$(Get-Date -Format yyyy-MM-dd).gz" --gzip --db=tareasdb
docker cp mongo:/data/db/backup-2025-04-04.gz ./backup-2025-04-04.gz
```

---

## ğŸ“ Diagrama de Infraestructura

Disponible en el archivo `infraestructura_microservicio.pdf`, representa:

- Cliente (Thunder Client)
- Contenedor app (Golang)
- Contenedor MongoDB
- Red Docker y volumen persistente

---

## ğŸ¯ Entregables

- CÃ³digo fuente con estructura modular
- Dockerfile y docker-compose.yml funcionales
- Archivo `.env` y scripts
- ColecciÃ³n Thunder Client exportada
- Pruebas unitarias y cobertura
- Backup generado desde MongoDB
- Diagrama de infraestructura
- BONUS: Script de automatizaciÃ³n (`automatizar.ps1` / `automatizar.sh`)
- ğŸ³ Imagen publicada en Docker Hub: [juanma1301/parcial-so-put](https://hub.docker.com/r/juanma1301/parcial-so-put)

---

Desarrollado por **Juan Manuel** | IngenierÃ­a de Software | 2025 âœ…

